{% extends "admin/monitor/jk_base.html" %}
{% block content %}
    {{ super() }}
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>Process[{{ pid }}] Support IPV4/IPV6</h5>
                    <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="table_data_tables.html#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#">Config apt</a>
                                </li>
                                <li><a href="#">Config opt</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                    </div>

                </div>
                <div class="ibox-content">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover dataTables-example">
                            <thead>
                            <tr>
                                <th>fd</th>
                                <th>family</th>
                                <th>type</th>
                                <th>local address</th>
                                <th>local port</th>
                                <th>remote address</th>
                                <th>remote port</th>
                                <th>status</th>
                            </tr>
                            </thead>
                            <tbody>
                             {% for c in connections %}
                                 {% if "AF_INET" in c.family  %}
                                <tr class="gradeX">
                                    <td>{{ c.fd }}</td>
                                    <td>{{ c.family }}</td>
                                    <td>{{ c.type }}</td>
                                    <td>{{ c.local_addr_host if c.local_addr_host}}</td>
                                    <td>{{ c.local_addr_port if c.local_addr_port}}</td>
                                    <td>{{ c.remote_addr_host if c.remote_addr_host }}</td>
                                    <td>{{ c.remote_addr_port if c.remote_addr_port}}</td>
                                    <td>{{ c.state }}</td>
                                </tr>
                                 {% endif %}
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox product-detail">
                <div class="ibox-title">
                    <h5>Process[{{ pid }}] Detail Info.</h5>
                    <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="table_data_tables.html#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#">Config apt</a>
                                </li>
                                <li><a href="#">Config opt</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                    </div>

                </div>
                <div class="ibox-content">
                    <table class="table">
                        <tr class="skip-border">
                            <td>PID</td><td>{{ process.pid }}</td>
                        </tr>
                        {% if process.parent_name %}
                        <tr>
                            <td>Parent</td>
                            <td><a href="{{ url_for("admin.admin_process", pid=process.ppid) }}">{{ process.parent_name }}</a> ({{ process.ppid }})</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <td>Command</td>
                            <td>
                                {{ process.cmdline }}
                            </td>
                        </tr>
                        <tr>
                            <td>User</td>
                            <td>{{ process.user or "-"}}</td>
                        </tr>
                        <tr>
                            <td>User ids(uid)</td>
                            <td>
                                <table class="table table-bordered">
                                    <tr>
                                        <td>real</td>
                                        <td>{{ process.uid_real }}</td>
                                    </tr>
                                    <tr>
                                        <td>effective</td>
                                        <td>{{ process.uid_effective }}</td>
                                    </tr>
                                    <tr>
                                        <td>saved</td>
                                        <td>{{ process.uid_saved }}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>Group ids(gid)</td>
                            <td>
                                <table class="table table-bordered">
                                    <tr>
                                        <td>real</td>
                                        <td>{{ process.gid_real }}</td>
                                    </tr>
                                    <tr>
                                        <td>effective</td>
                                        <td>{{ process.gid_effective }}</td>
                                    </tr>
                                    <tr>
                                        <td>saved</td>
                                        <td>{{ process.gid_saved }}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>Terminal</td>
                            <td>{{ process.terminal }}</td>
                        </tr>
                        <tr>
                            <td>Status</td>
                            <td>{{ process.status }}</td>
                        </tr>
                        <!--
                        <tr>
                            <td>Nice</td>
                            <td>{{ process.nice }}</td>
                        </tr>
                        -->
                        <tr>
                            <td>CWD</td>
                            <td>{{ process.cwd }}</td>
                        </tr>
                        <!--
                        <tr>
                            <td># File-descriptors</td>
                            <td>{{ process.num_files }}</td>
                        </tr>
                        -->
                        <tr>
                            <td>Threads(线程)</td>
                            <td>{{ process.num_threads }}
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Thread id</th>
                                            <th>User time</th>
                                            <th>System time</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for t in threads %}
                                            <tr>
                                                <td>{{ t.id }}</td>
                                                <td>{{ t.cpu_time_user }}</td>
                                                <td>{{ t.cpu_time_system }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>CPU times</td>
                            <td>
                                <table class="table table-bordered">
                                    <tr>
                                        <td>user</td>
                                        <td>{{ process.cpu_times_user }}</td>
                                    </tr>
                                    <tr>
                                        <td>system</td>
                                        <td>{{ process.cpu_times_system }}</td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                       <!--
                        <tr>
            <td>I/O Nice</td>
            <td>class: {{ process.io_nice_class }}, value: {{ process.io_nice_value }}</td>
        </tr>
                        <tr>
            <td>
                # Context-switches
            </td>
            <td>
                <table class="table table-bordered">
                    <tr>
                        <td>voluntary</td>
                        <td>{{ process.num_ctx_switches_vol }}</td>
                    </tr>
                    <tr>
                        <td>involuntary</td>
                        <td>{{ process.num_ctx_switches_invol }}</td>
                    </tr>
                </table>
            </td>
        </tr>

                        <tr>
                            <td>CPU affinity</td>
                            <td>{{ process.cpu_affinity|join(", ") }}</td>
                        </tr>
        -->
                        <tr>
                            <td>More</td>
                            <td>请自行在源码里查看</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

{% endblock %}